webpackJsonp([0],{226:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(227),a=s.n(n);e.default={components:{student:a.a},computed:{type:function(){return this.$route.params.type}}}},227:function(t,e,s){var n=s(2)(s(228),s(229),!1,null,null,null);t.exports=n.exports},228:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["type"],data:function(){return{refresh:0}},computed:{types:function(){switch(this.type){case"enrolled":return"enrolled";case"pending":return"pending";default:return""}}}}},229:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("panel-default",{attrs:{"l-class":"table-responsive"}},[s("h4",[t._v(t._s(t.type[0].toUpperCase()+t.type.substring(1))+" Students")]),s("hr"),t._v(" "),s("div",{staticClass:"form-group"},[s("router-link",{staticClass:"btn btn-success",attrs:{to:{name:"Add Student"}}},[s("i",{staticClass:"fa fa-plus"}),t._v(" Add Student\n\t\t")]),t._v(" "),s("button",{staticClass:"btn btn-default",on:{click:function(e){t.refresh++}}},[s("i",{staticClass:"fa fa-refresh"}),t._v(" Refresh Student\n\t\t")])],1),t._v(" "),s("table-student",{attrs:{src:t.data.API+"student/"+t.types,refresh:t.refresh}})],1)},staticRenderFns:[]}},230:function(t,e){t.exports={render:function(){var t=this.$createElement;return(this._self._c||t)("student",{attrs:{type:this.type}})},staticRenderFns:[]}},231:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{loading:!1}},methods:{back:function(){this.$router.go(-1)},submit:function(){if(!this.loading){this.loading=!0,this.util.notify("Adding Student","loading");var t=this;axios.post(this.data.API+"student",$("#add_form").serialize()).then(function(e){$.notifyClose(),t.loading=!1,t.util.showResult(e,"success")&&(t.data.students.data.push(e.data.student),t.back())}).catch(function(e){$.notifyClose(),t.loading=!1,t.util.showResult(e,"error")})}}}}},232:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("panel-default",[s("h4",[t._v("Add Student")]),s("hr"),t._v(" "),s("form",{staticClass:"row",attrs:{id:"add_form"},on:{submit:function(e){return e.preventDefault(),t.submit()}}},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"grade_id"}},[t._v("Grade")]),t._v(" "),s("select",{staticClass:"form-control",attrs:{name:"grade_id",required:""}},[s("option",{attrs:{value:"0",disabled:"",selected:""}},[t._v("--- Select Grade ---")]),t._v(" "),t._l(t.data.grades,function(e){return s("option",{domProps:{value:e.id}},[t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t")])})],2)]),t._v(" "),s("form-group",{attrs:{name:"student_id"}},[t._v("Student ID")]),t._v(" "),s("form-group",{attrs:{name:"first_name"}},[t._v("First Name")]),t._v(" "),s("form-group",{attrs:{name:"middle_name","l-required":!1}},[t._v("Middle Name")]),t._v(" "),s("form-group",{attrs:{name:"last_name"}},[t._v("Last Name")])],1),t._v(" "),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"address"}},[t._v("Address")]),t._v(" "),s("textarea",{staticClass:"form-control",attrs:{name:"address"}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"phone"}},[t._v("Phone")]),t._v(" "),s("input",{staticClass:"form-control",attrs:{type:"number",name:"phone",minlength:"11",maxlength:"11"}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"birthday"}},[t._v("Birthday")]),t._v(" "),s("input",{staticClass:"form-control",attrs:{type:"date",name:"birthday",required:""}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"gender"}},[t._v("Gender")]),t._v(" "),s("select",{staticClass:"form-control",attrs:{name:"gender"}},[s("option",{attrs:{value:"Male"}},[t._v("Male")]),t._v(" "),s("option",{attrs:{value:"Female"}},[t._v("Female")])])]),t._v(" "),s("div",{staticClass:"form-group"},[s("input",{staticClass:"btn btn-success",attrs:{type:"submit",value:"Submit"}}),t._v(" "),s("input",{staticClass:"btn btn-default",attrs:{type:"button",value:"Back"},on:{click:function(e){return t.back()}}})])])])])},staticRenderFns:[]}},233:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{loading:!1}},methods:{back:function(){this.$router.go(-1)},submit:function(){if(!this.loading){this.loading=!0,this.util.notify("Updating Students","loading");var t=this;axios.put(this.data.API+"student/"+this.id,$("#edit_form").serialize()).then(function(e){t.loading=!1,$.notifyClose(),t.util.showResult(e,"success")&&(t.student=e.data.student,t.back())}).catch(function(e){t.loading=!1,$.notifyClose(),t.util.showResult(e,"error")})}}},computed:{student:{get:function(){var t=this.data.students.data;for(var e in t)if(t[e].id==this.id)return t[e];return{}},set:function(t){var e=this.data.students.data;for(var s in e)e[s].id==this.id&&e.splice(s,1,t)}},id:function(){return this.$route.params.id}}}},234:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("panel-default",[s("h4",[t._v("Update Student")]),s("hr"),t._v(" "),s("form",{staticClass:"row",attrs:{id:"edit_form"},on:{submit:function(e){return e.preventDefault(),t.submit()}}},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"grade_id"}},[t._v("Grade")]),t._v(" "),s("select",{staticClass:"form-control",attrs:{name:"grade_id",required:""},domProps:{value:t.student.grade_id}},[s("option",{attrs:{value:"0",disabled:""}},[t._v("--- Select Grade ---")]),t._v(" "),t._l(t.data.grades,function(e){return s("option",{domProps:{value:e.id}},[t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t")])})],2)]),t._v(" "),s("form-group",{attrs:{name:"student_id",value:t.student.student_id}},[t._v("Student ID")]),t._v(" "),s("form-group",{attrs:{name:"first_name",value:t.student.first_name}},[t._v("First Name")]),t._v(" "),s("form-group",{attrs:{name:"middle_name","l-required":!1,value:t.student.middle_name}},[t._v("Middle Name")]),t._v(" "),s("form-group",{attrs:{name:"last_name",value:t.student.last_name}},[t._v("Last Name")])],1),t._v(" "),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"address"}},[t._v("Address")]),t._v(" "),s("textarea",{staticClass:"form-control",attrs:{name:"address"}},[t._v(t._s(t.student.address))])]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"phone"}},[t._v("Phone")]),t._v(" "),s("input",{staticClass:"form-control",attrs:{type:"number",name:"phone",minlength:"11",maxlength:"11"},domProps:{value:t.student.phone}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"birthday"}},[t._v("Birthday")]),t._v(" "),s("input",{staticClass:"form-control",attrs:{type:"date",name:"birthday",required:""},domProps:{value:t.student.birthday}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"gender"}},[t._v("Gender")]),t._v(" "),s("select",{staticClass:"form-control",attrs:{name:"gender"},domProps:{value:t.student.gender}},[s("option",{attrs:{value:"Male"}},[t._v("Male")]),t._v(" "),s("option",{attrs:{value:"Female"}},[t._v("Female")])])]),t._v(" "),s("div",{staticClass:"form-group"},[s("input",{staticClass:"btn btn-success",attrs:{type:"submit",value:"Submit"}}),t._v(" "),s("router-link",{staticClass:"btn btn-primary",attrs:{tag:"button",to:{name:"Enroll Student",params:{id:t.id}}}},[t._v("Enroll Student")]),t._v(" "),s("input",{staticClass:"btn btn-default",attrs:{type:"button",value:"Back"},on:{click:function(e){return t.back()}}})],1)])])])},staticRenderFns:[]}},235:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{status:"loading",loading:!1,sections:[],section_id:0,grade_requirements:[],student_requirements:[],enroll:{}}},created:function(){console.log(this),this.getStudentInfo()},methods:{submit:function(){if(!this.loading){this.loading=!0,this.util.notify("Submitting data, please wait...","loading");var t={},e=this,s=this.data.API+"student/".concat(this.id,"/enroll");t.requirements=this.student_requirements,t.section_id=this.section_id,axios.post(s,t).then(function(t){e.loading=!1,$.notifyClose(),e.util.showResult(t,"success")&&e.back()}).catch(function(t){e.loading=!1,$.notifyClose(),e.util.showResult(t,"error")})}},requires:function(t){this.$nextTick(function(){if(this.isChecked(t))this.student_requirements.push(t);else{var e=this.student_requirements.indexOf(t);this.student_requirements.splice(e,1)}})},isChecked:function(t){return $("[type=checkbox][value=".concat(t,"]")).prop("checked")},getRequirement:function(t){var e=this.data.requirements;for(var s in e)if(e[s].id==t)return e[s].name;return""},back:function(){this.$router.go(-1)},getStudentInfo:function(){var t=this,e=this;axios.get(this.data.API+"student/"+this.id).then(function(s){console.log(s),e.status="success",e.data.requirements=s.data.requirement,e.sections=s.data.section,e.grade_requirements=s.data.grade_requirement,e.enroll=s.data.enroll,e.section_id=s.data.enroll.section_id?s.data.enroll.section_id:0,t.$nextTick(function(){s.data.student_requirements.map(function(t){var s=$("[type=checkbox][value=".concat(t.requirement_id,"]"));s.prop("checked",!0),s.prop("disabled",!0),e.student_requirements.push(t.requirement_id)})})}).catch(function(t){e.util.log(t),e.status="error"})},getGrade:function(t){var e=this.data.grades;for(var s in e)if(e[s].id==t)return e[s].name;return""}},computed:{full_name:function(){return this.student.first_name+" "+this.student.middle_name+" "+this.student.last_name},student:function(){var t=this.data.students.data;for(var e in t)if(t[e].id==this.id)return t[e];return{}},id:function(){return this.$route.params.id},hasPassedAllRequirements:function(){var t=this.grade_requirements,e=this.student_requirements;return t.every(function(t){return function(t){for(var s in e)if(e[s]==t)return!0;return!1}(t.requirement_id)})}}}},236:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("panel-default",["loading"==t.status?s("div",[s("h1",[t._v("Loading..."),s("i",{staticClass:"fa fa-refresh fa-spin"})])]):"error"==t.status?s("div",{staticClass:"jumbotron"},[s("h1",[s("i",{staticClass:"fa fa-warning"}),t._v(" An error occured")])]):s("div",[s("h4",[t._v("Enroll Student")]),s("hr"),t._v(" "),s("div",{staticClass:"panel panel-info"},[s("div",{staticClass:"panel-heading"},[t._v("Student's Information")]),t._v(" "),s("div",{staticClass:"panel-body row"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Name : ")]),t._v(" "+t._s(t.full_name)+"\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Grade : ")]),t._v(" "+t._s(t.getGrade(t.student.grade_id))+"\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Student ID : ")]),t._v(" "+t._s(t.student.student_id)+"\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Address : ")]),t._v(" "+t._s(t.student.address)+"\n\t\t\t\t")])]),t._v(" "),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Phone : ")]),t._v(" "+t._s(t.student.phone)+"\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Birthday : ")]),t._v(" "+t._s(t.student.birthday)+"\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Gender : ")]),t._v(" "+t._s(t.student.gender)+"\n\t\t\t\t")])])])]),t._v(" "),s("div",{staticClass:"panel panel-info"},[s("div",{staticClass:"panel-heading"},[t._v("Enroll Student")]),t._v(" "),s("div",{staticClass:"panel-body"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.submit()}}},[t.grade_requirements.length>0?s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"requirements"}},[t._v("Requirements")]),s("br"),t._v(" "),t._l(t.grade_requirements,function(e){return s("label",{staticClass:"checkbox-inline"},[s("input",{attrs:{type:"checkbox",name:"requirements"},domProps:{value:e.requirement_id},on:{change:function(s){return t.requires(e.requirement_id)}}}),t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.getRequirement(e.requirement_id))+"\n\t\t\t\t\t\t")])})],2):t._e(),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"section_id"}},[t._v("Section")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.section_id,expression:"section_id"}],staticClass:"form-control",attrs:{disabled:!t.hasPassedAllRequirements},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.section_id=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"0"}},[t._v("---Select Section---")]),t._v(" "),t._l(t.sections,function(e){return s("option",{domProps:{value:e.id}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t")])})],2)]),t._v(" "),s("div",{staticClass:"form-group"},[s("input",{staticClass:"btn btn-success",attrs:{type:"submit",value:"Submit"}}),t._v(" "),s("input",{staticClass:"btn btn-default",attrs:{type:"button",value:"Back"},on:{click:function(e){return t.back()}}})])])])])])])},staticRenderFns:[]}},247:function(t,e,s){var n=s(2)(s(226),s(230),!1,null,null,null);t.exports=n.exports},248:function(t,e,s){var n=s(2)(s(231),s(232),!1,null,null,null);t.exports=n.exports},249:function(t,e,s){var n=s(2)(s(233),s(234),!1,null,null,null);t.exports=n.exports},250:function(t,e,s){var n=s(2)(s(235),s(236),!1,null,null,null);t.exports=n.exports}});